{
  "hash": "8b7fed65a0d7111dada043dfa72be2df",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Example Analysis\"\nformat:\n  html:\n    toc: true\n    number-sections: true\nbibliography: references.bib\nlink-citations: true\nexecute:\n  echo: true\n  message: false\n  warning: false\n\n---\n\n# Introduction and Research Question\n\n## Core Question\n\nWhat is the difference in **popularity** (total ratings received) and **user satisfaction** (average rating) across different movie genres based on their release decades?\n\nThis analysis aims to move beyond simple overall statistics to understand the longitudinal trends of cinematic reception. The findings can offer insights into the lasting appeal of genres and how user tastes evolve over time.\n\n## Intended Audience\n\nThis report is primarily intended for **Film Producers, Movie Critics, and aspiring Data Analysts** who seek to understand long-term genre performance and apply basic data wrangling and visualization techniques using the Tidyverse framework.\n\n# Data Source and Dictionary\n\n### Data Origin and Link\n\nThe data used for this analysis is the **MovieLens ml-latest-small dataset** [@Harper2015]. This dataset contains over 100,000 ratings and 3,683 tag applications across 9,742 movies, collected from 610 users.\n\nThe methodology relies heavily on the `tidyverse` framework for data cleaning and visualization, following modern practices for data science workflows [@Wickham2017].\n\n* **Data Source Link:** The dataset is publicly available from [GroupLens Research](https://grouplens.org/datasets/movielens/latest/).\n\n### Data Dictionary\n\nWe utilize the core files `ratings.csv` and `movies.csv`:\n\n| File | Variable | Description |\n| :--- | :--- | :--- |\n| `ratings.csv` | `userId` | Anonymized user identifier. |\n| | `movieId` | Movie identifier, used for joining tables. |\n| | `rating` | User rating on a 0.5 to 5.0 scale. |\n| `movies.csv` | `title` | Movie title, including the release year in parentheses. |\n| | `genres` | A pipe-separated string listing all genres (e.g., `Action|Thriller`). |\n\n# Data Wrangling and Transformation\n\nThis section performs the required data cleaning to prepare the data for analysis. We join the ratings and movie tables, extract the release year, and use the `tidyr::separate_rows()` function to properly handle the pipe-separated genre strings.\n\n:::{.column-margin}\n**Data Tidy-Up:** We utilize `separate_rows()` here because the genre list is a single pipe-separated string, requiring transformation from wide format (one cell) to long format (multiple rows) for easy group aggregation.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# -------------------------------------------------------------------------------- #\n# 1. Load Libraries\n# -------------------------------------------------------------------------------- #\nlibrary(tidyverse)\nlibrary(scales)\noptions(scipen = 999) # Disable scientific notation\n\n# Set size for plots\nplot_theme <- theme_minimal(base_size = 14)\n\n# -------------------------------------------------------------------------------- #\n# 2. Data Loading\n# -------------------------------------------------------------------------------- #\n\nratings_df <- read_csv(\"ml-latest-small/ratings.csv\", show_col_types = FALSE)\nmovies_df <- read_csv(\"ml-latest-small/movies.csv\", show_col_types = FALSE)\n\n# -------------------------------------------------------------------------------- #\n# 3. Data Wrangling using Tidyverse\n# -------------------------------------------------------------------------------- #\n\n# Merge data and extract release year\nfull_data <- ratings_df %>%\n  left_join(movies_df, by = \"movieId\") %>%\n  mutate(\n    release_year = str_extract(title, \"\\\\((\\\\d{4})\\\\)\"),\n    release_year = as.numeric(str_remove_all(release_year, \"[\\\\(\\\\)]\"))\n  ) %>%\n  # Remove records where year could not be parsed\n  filter(!is.na(release_year))\n\n# Convert data to long format by splitting genres\nlong_data <- full_data %>%\n  # Genres are pipe-separated strings in this dataset\n  # Splits the single 'genres' column into multiple rows\n  separate_rows(genres, sep = \"\\\\|\") %>%\n  filter(genres != \"(no genres listed)\") %>%\n  mutate(\n    # Create decade as a factor for ordering/grouping\n    decade = factor(floor(release_year / 10) * 10)\n  ) %>%\n  select(movieId, rating, genres, decade)\n\n# Calculate average rating and rating count per decade and genre\nsummary_data <- long_data %>%\n  # Group by both decade and genre\n  group_by(decade, genres) %>%\n  summarise(\n    n_ratings = n(),\n    avg_rating = mean(rating, na.rm = TRUE),\n    .groups = 'drop'\n  )\n```\n:::\n\n\n# Data Visualization and Analysis\nThe visualizations below are built using the `ggplot2` package, which implements the **Grammar of Graphics** principles to construct statistical plots [@Wickham2016].\n\n## Plot 1: Average Rating Distribution\nThis visualization uses faceting to compare the distribution of average ratings across different decades for major movie genres. A tightly grouped distribution suggests consistent critical reception, while a wider spread indicates high variance.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# -------------------------------------------------------------------------------- #\n# Data Visualization\n# -------------------------------------------------------------------------------- #\n\n# --- Plot 1: Average Rating Distribution by Decade and Genre  --- #\n\n# Identify top genres for focused analysis\ntop_genres <- summary_data %>%\n  group_by(genres) %>%\n  summarise(total_n = sum(n_ratings)) %>%\n  filter(total_n > 5000) %>%\n  pull(genres)\n\n# Create the plot object\nplot1 <- summary_data %>%\n  filter(genres %in% top_genres) %>% \n  ggplot(aes(x = decade, y = avg_rating, fill = decade)) +\n  geom_violin(trim = FALSE) + \n  geom_boxplot(width = 0.1, color = \"grey30\", outlier.shape = NA) +\n  # Facet by Genre\n  facet_wrap(~ genres, scales = \"free_y\", ncol = 3) + \n  labs(\n    title = \"Plot 1: Average Rating Distribution for Major Movie Genres by Decade\",\n    subtitle = \"Analysis of rating consistency across decades for genres with high rating volume.\",\n    x = \"Movie Release Decade\",\n    y = \"Average Rating (1.0 - 5.0)\",\n    caption = \"Data Source: MovieLens ml-latest-small Dataset | Facet: genres | Geoms: violin, boxplot\"\n  ) +\n  theme_minimal(base_size = 14) + \n  theme(\n    legend.position = \"none\",\n    axis.text.x = element_text(angle = 50, hjust = 1, size = 10), \n    panel.spacing = unit(1.5, \"lines\"), \n    # Center facet strip text\n    strip.text = element_text(face = \"bold\", size = 10),\n    # Adjust plot margins to prevent cropping\n    plot.margin = unit(c(0.2, 0.2, 0.2, 0.2), \"cm\") \n  )\n\n# Display the plot\nprint(plot1)\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-html/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n:::{.callout-tip}\n\nKey Insight from Plot 1\nThe Drama genre exhibits a consistently high average rating distribution across all decades, suggesting its enduring quality or favorable perception among MovieLens users. Genres like Comedy show a wider spread, indicating high variance in user taste. \n:::\n\n## Plot 2: Popularity Trends of Top Genres\nThis line plot tracks the popularity (total ratings count) of the top 5 genres over time, revealing which genres have dominated the user base's viewing habits.\n\n::: {.cell}\n\n```{.r .cell-code}\n# --- Plot 2: Popularity Trends of Top Genres over Time --- #\n# Identify the absolute top 5 genres for line plot\nabs_top_5_genres <- summary_data %>% \n  group_by(genres) %>% \n  summarise(total_n = sum(n_ratings)) %>% \n  arrange(desc(total_n)) %>% \n  head(5) %>% \n  pull(genres)\n\nsummary_data %>%\n  filter(genres %in% abs_top_5_genres) %>%\n  ggplot(aes(x = decade, y = n_ratings, group = genres, color = genres)) +\n  geom_line(size = 1.2) + \n  geom_point(size = 3) +\n  labs(\n    title = \"Plot 2: Popularity (Rating Count) Trend of Top 5 Genres by Decade\",\n    subtitle = \"Drama and Comedy consistently lead in popularity across the analyzed time span (1950s - 2010s).\",\n    x = \"Movie Release Decade\",\n    y = \"Total Number of Ratings (n_ratings)\",\n    color = \"Movie Genre\",\n    caption = \"Data Source: MovieLens ml-latest-small Dataset | Geoms: line, point\"\n  ) +\n  scale_y_continuous(labels = comma) + # Format Y-axis with commas\n  plot_theme +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## Plot 3: Highest-Rated Genres by Decade\nWe use a column chart to highlight which specific genre achieved the absolute highest average rating in each decade. This identifies smaller, high-quality genres that might be overlooked in a popularity analysis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# --- Plot 3: Highest-Rated Genres by Decade --- #\n\n# Find the single genre with the highest average rating for each decade\nhighest_rated_decade <- summary_data %>%\n  group_by(decade) %>%\n  filter(avg_rating == max(avg_rating)) %>%\n  ungroup()\n\nhighest_rated_decade %>%\n  ggplot(aes(x = decade, y = avg_rating, fill = genres)) +\n  geom_col(position = \"dodge\") + \n  labs(\n    title = \"Plot 3: Highest Average Rated Genre in Each Decade\",\n    subtitle = \"Non-mainstream genres like Film-Noir and Documentary often claim the highest average rating in older decades.\",\n    x = \"Movie Release Decade\",\n    y = \"Highest Average Rating (1.0 - 5.0)\",\n    fill = \"Genre\",\n    caption = \"Data Source: MovieLens ml-latest-small Dataset | Geom: col\"\n  ) +\n  scale_y_continuous(limits = c(0, 5)) +\n  plot_theme +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# -------------------------------------------------------------------------------- #\n# 5. Function List (For Requirement Check)\n# -------------------------------------------------------------------------------- #\ncat(\"\\n--- Used Tidyverse Functions (for review) ---\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Used Tidyverse Functions (for review) ---\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"dplyr Functions (required 5): left_join(), mutate(), filter(), group_by(), summarise(), select()\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ndplyr Functions (required 5): left_join(), mutate(), filter(), group_by(), summarise(), select()\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"tidyr Functions (required 1): separate_rows()\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntidyr Functions (required 1): separate_rows()\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ggplot2 geom_*() Functions (required 3): geom_violin(), geom_boxplot(), geom_line(), geom_point(), geom_col()\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nggplot2 geom_*() Functions (required 3): geom_violin(), geom_boxplot(), geom_line(), geom_point(), geom_col()\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"ggplot2 Features: facet_wrap(), labs(title, subtitle, caption, x, y)\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nggplot2 Features: facet_wrap(), labs(title, subtitle, caption, x, y)\n```\n\n\n:::\n:::\n\n\n:::{.callout-note}\n\nData Limitation\nThe MovieLens dataset, collected by volunteer users, often contains a bias toward users interested in older, more niche, or \"cult\" films. This specialized user base may lead to inflated average ratings for smaller genres like Film-Noir and Documentary which lack wide public appeal but are highly valued by enthusiasts. \n:::\n\n# Summary of Analysis\nThis analysis reveals a clear distinction between popular and critically acclaimed genres within the MovieLens community. Drama and Comedy consistently maintain the highest popularity across all decades in terms of sheer rating volume (Plot 2). However, in terms of average rating, smaller, more specialized genres like Documentary and Film-Noir frequently achieve the highest scores, particularly in the mid-20th century (Plot 3).\n\nThe distribution analysis (Plot 1) shows that while most major genres cluster around a 3.5 to 4.0 average, the wide distribution for genres like Comedy and Drama suggests a large variance in user opinion, contrasting with the tighter distribution of a genre like Mystery. Overall, the data indicates that while high popularity guarantees large reach, it doesn't necessarily secure the highest user satisfaction.",
    "supporting": [
      "analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}